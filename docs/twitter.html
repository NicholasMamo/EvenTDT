

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta content="The tweet collection or reading functionality of EvenTDT" name="description" />
<meta content="Python, TDT, Twitter" name="keywords" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>8. Twitter &mdash; EvenTDT 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="9. Consumers" href="consumers.html" />
    <link rel="prev" title="7. Summarization" href="summarization.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> EvenTDT
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="config.html">0. Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">1. Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="vsm.html">2. Vector Space Model (VSM)</a></li>
<li class="toctree-l1"><a class="reference internal" href="nlp.html">3. Natural Language Processing (NLP)</a></li>
<li class="toctree-l1"><a class="reference internal" href="wikinterface.html">4. Wikinterface</a></li>
<li class="toctree-l1"><a class="reference internal" href="apd.html">5. Automatic Participant Detection (APD)</a></li>
<li class="toctree-l1"><a class="reference internal" href="tdt.html">6. Topic Detection and Tracking (TDT)</a></li>
<li class="toctree-l1"><a class="reference internal" href="summarization.html">7. Summarization</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">8. Twitter</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#listeners">Listeners</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="consumers.html">9. Consumers</a></li>
<li class="toctree-l1"><a class="reference internal" href="other.html">10. Other</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">EvenTDT</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>8. Twitter</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/twitter.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="twitter">
<h1>8. Twitter<a class="headerlink" href="#twitter" title="Permalink to this headline">¶</a></h1>
<p>The Twitter package is used to facilitate collecting or reading tweets.
The package itself has functions to help with processing.</p>
<span class="target" id="module-twitter"></span><p>Functions to process tweets.</p>
<dl class="function">
<dt id="twitter.extract_timestamp">
<code class="sig-name descname">extract_timestamp</code><span class="sig-paren">(</span><em class="sig-param">tweet</em><span class="sig-paren">)</span><a class="headerlink" href="#twitter.extract_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the timestamp from the given tweet.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tweet</strong> (<em>dict</em>) – The tweet being considered.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The timestamp of the tweet.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<div class="section" id="listeners">
<h2>Listeners<a class="headerlink" href="#listeners" title="Permalink to this headline">¶</a></h2>
<p>Tweet listeners download tweets in real-time.</p>
<span class="target" id="module-twitter.listener"></span><p>The tweet lisener is based on Tweepy.
It is used to listen to tweets, processing them as need be when they arrive, until the event ends.
The behavior of this class collects tweets in bulk, then writes them to an always-open file.</p>
<dl class="class">
<dt id="twitter.listener.TweetListener">
<em class="property">class </em><code class="sig-name descname">TweetListener</code><span class="sig-paren">(</span><em class="sig-param">f</em>, <em class="sig-param">max_time=3600</em>, <em class="sig-param">attributes=None</em><span class="sig-paren">)</span><a class="headerlink" href="#twitter.listener.TweetListener" title="Permalink to this definition">¶</a></dt>
<dd><p>The listener that handles the collected tweets.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>THRESHOLD</strong> (<em>int</em>) – The number of tweets to accumulate before writing them to file.</p></li>
<li><p><strong>file</strong> (<em>file</em>) – The opened file pointer to which to write the tweets.</p></li>
<li><p><strong>tweets</strong> (<em>list</em>) – The list of read tweets that have not been written to file yet.</p></li>
<li><p><strong>max_time</strong> (<em>int</em>) – The maximum time in seconds to spend reading the file.</p></li>
<li><p><strong>start</strong> (<em>int</em>) – The timestamp when the listener started waiting for tweets.</p></li>
<li><p><strong>attributes</strong> (<em>list of str</em><em> or </em><em>None</em>) – The attributes to save from each tweet.
If <cite>None</cite> is given, the entire tweet objects are saved.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="twitter.listener.TweetListener.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">f</em>, <em class="sig-param">max_time=3600</em>, <em class="sig-param">attributes=None</em><span class="sig-paren">)</span><a class="headerlink" href="#twitter.listener.TweetListener.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the listener.
Simultaneously set the file, the list of tweets and the number of processed tweets.
By default, the stream continues processing for an hour.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>f</strong> (<em>file</em>) – The opened file pointer to which to write the tweets.</p></li>
<li><p><strong>max_time</strong> (<em>int</em>) – The maximum time in seconds to spend reading the file.</p></li>
<li><p><strong>attributes</strong> (<em>list of str</em><em> or </em><em>None</em>) – The attributes to save from each tweet.
If <cite>None</cite> is given, the entire tweet objects are saved.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="twitter.listener.TweetListener.flush">
<code class="sig-name descname">flush</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#twitter.listener.TweetListener.flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Flush the tweets to file.</p>
<p>Data is saved as a string to file.</p>
</dd></dl>

<dl class="method">
<dt id="twitter.listener.TweetListener.on_data">
<code class="sig-name descname">on_data</code><span class="sig-paren">(</span><em class="sig-param">data</em><span class="sig-paren">)</span><a class="headerlink" href="#twitter.listener.TweetListener.on_data" title="Permalink to this definition">¶</a></dt>
<dd><p>When tweets are received, add them to a list.
If there are many tweets, save them to file and reset the list of tweets.
The override flag indicates whether the function should skip checking if the tweet is valid.</p>
<p>Data is saved as a string to file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>listener</em>) – The received data.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A boolean indicating if the listener has finished reading tweets.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="twitter.listener.TweetListener.filter">
<code class="sig-name descname">filter</code><span class="sig-paren">(</span><em class="sig-param">tweet</em><span class="sig-paren">)</span><a class="headerlink" href="#twitter.listener.TweetListener.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter the given tweet using the attributes.
If no attributes are given, the tweet’s attributes are all retained.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tweet</strong> (<em>dict</em>) – The tweet attributes as a dictionary.
The keys are the attribute names and the values are the data.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The tweet as a dictionary with only the required attributes.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="twitter.listener.TweetListener.on_error">
<code class="sig-name descname">on_error</code><span class="sig-paren">(</span><em class="sig-param">status</em><span class="sig-paren">)</span><a class="headerlink" href="#twitter.listener.TweetListener.on_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Print any errors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>status</strong> (<em>str</em>) – The error status.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-twitter.queued_listener"></span><p>The queued listener is based on Tweepy.
All a queued listener does with the data is add it to a queue.
It is up to other consumers to process it.</p>
<dl class="class">
<dt id="twitter.queued_listener.QueuedListener">
<em class="property">class </em><code class="sig-name descname">QueuedListener</code><span class="sig-paren">(</span><em class="sig-param">queue</em>, <em class="sig-param">max_time=3600</em>, <em class="sig-param">attributes=None</em><span class="sig-paren">)</span><a class="headerlink" href="#twitter.queued_listener.QueuedListener" title="Permalink to this definition">¶</a></dt>
<dd><p>The queued listener diverges enough from the <a class="reference internal" href="#twitter.listener.TweetListener" title="twitter.listener.TweetListener"><code class="xref py py-class docutils literal notranslate"><span class="pre">TweetListener</span></code></a> that it is built from the ground up.
Incoming tweets are not added to a queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="consumers.html#module-queues.queue" title="queues.queue"><strong>queue</strong></a> (<a class="reference internal" href="consumers.html#queues.queue.Queue" title="queues.queue.Queue"><code class="xref py py-class docutils literal notranslate"><span class="pre">Queue</span></code></a>) – The queue to which to add incoming tweets.</p></li>
<li><p><strong>tweets</strong> (<em>list</em>) – The list of read tweets that have not been written to file yet.</p></li>
<li><p><strong>max_time</strong> (<em>int</em>) – The maximum time in seconds to spend reading the file.</p></li>
<li><p><strong>start</strong> (<em>int</em>) – The timestamp when the listener started waiting for tweets.</p></li>
<li><p><strong>attributes</strong> (<em>list of str</em><em> or </em><em>None</em>) – The attributes to save from each tweet.
If <cite>None</cite> is given, the entire tweet objects are saved.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="twitter.queued_listener.QueuedListener.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">queue</em>, <em class="sig-param">max_time=3600</em>, <em class="sig-param">attributes=None</em><span class="sig-paren">)</span><a class="headerlink" href="#twitter.queued_listener.QueuedListener.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the listener.
Simultaneously set the queue, the list of tweets and the number of processed tweets.
By default, the stream continues processing for an hour.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>queue</strong> – The queue to which to add incoming tweets.</p></li>
<li><p><strong>max_time</strong> (<em>int</em>) – The maximum time in seconds to spend reading the file.</p></li>
<li><p><strong>attributes</strong> (<em>list of str</em><em> or </em><em>None</em>) – The attributes to save from each tweet.
If <cite>None</cite> is given, the entire tweet objects are saved.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="twitter.queued_listener.QueuedListener.on_data">
<code class="sig-name descname">on_data</code><span class="sig-paren">(</span><em class="sig-param">data</em><span class="sig-paren">)</span><a class="headerlink" href="#twitter.queued_listener.QueuedListener.on_data" title="Permalink to this definition">¶</a></dt>
<dd><p>When tweets are received, add them to a list.
If there are many tweets, save them to file and reset the list of tweets.
The override flag indicates whether the function should skip checking if the tweet is valid.</p>
<p>Data is added as a dictionary to the queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>str</em>) – The received data.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A boolean indicating if the listener has finished reading tweets.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="twitter.queued_listener.QueuedListener.filter">
<code class="sig-name descname">filter</code><span class="sig-paren">(</span><em class="sig-param">tweet</em><span class="sig-paren">)</span><a class="headerlink" href="#twitter.queued_listener.QueuedListener.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter the given tweet using the attributes.
If no attributes are given, the tweet’s attributes are all retained.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tweet</strong> (<em>dict</em>) – The tweet attributes as a dictionary.
The keys are the attribute names and the values are the data.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The tweet as a dictionary with only the required attributes.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="twitter.queued_listener.QueuedListener.on_error">
<code class="sig-name descname">on_error</code><span class="sig-paren">(</span><em class="sig-param">status</em><span class="sig-paren">)</span><a class="headerlink" href="#twitter.queued_listener.QueuedListener.on_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Print any errors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>status</strong> (<em>str</em>) – The error status.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="consumers.html" class="btn btn-neutral float-right" title="9. Consumers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="summarization.html" class="btn btn-neutral float-left" title="7. Summarization" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Nicholas Mamo

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>